{"ast":null,"code":"var _jsxFileName = \"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/src/components/LogIn/index.js\";\nimport React, { Component } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport ReactDOM from 'react-dom';\nimport './Login.css';\nimport { Redirect, Route } from \"react-router\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.wasSucess = () => {\n      return new Promise((resolve, reject) => {\n        fetch('/login/', {\n          method: 'GET'\n        }).then(response => response.json()).then(data => {\n          console.log(data);\n          this.setState({\n            loginStatus: data['status']\n          });\n          resolve(data);\n        });\n      });\n    };\n\n    this.isLoggedIn = () => {\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          fetch('/login-status/').then(response => response.json()).then(data => {\n            this.setState({\n              loggedinstate: data['logged in']\n            });\n            console.log(data['logged in']);\n            resolve(data['logged in']);\n          });\n        }, 1500);\n      });\n    };\n\n    this.state = {\n      username: '',\n      password: '',\n      loggedinstate: '',\n      loginStatus: false\n    };\n  }\n\n  componentDidMount() {//this.isLoggedIn();\n  }\n\n  saveLogin(username, password) {\n    return new Promise((resolve, reject) => {\n      fetch('/login/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          \"username\": username,\n          \"password\": password\n        })\n      });\n      resolve();\n    });\n  }\n\n  handleChange(event) {\n    let name = event.target.name;\n\n    if (name == 'username') {\n      this.setState({\n        username: event.target.value\n      });\n    }\n\n    if (name == 'password') {\n      this.setState({\n        password: event.target.value\n      });\n    }\n  }\n\n  async handleSubmit(event) {\n    console.log(\"submitting\");\n    event.preventDefault();\n    await this.saveLogin(this.state.username, this.state.password);\n    /*await this.wasSucess().then(status => {\n      console.log(status);\n      if (status) {\n        this.render();\n      }\n      else {\n        console.log(\"no\")\n      }\n    });*/\n\n    await this.isLoggedIn().then(status => {\n      console.log(status);\n      this.setState({\n        loggedinstate: status\n      });\n    });\n  }\n\n  render() {\n    console.log(this.state.loginStatus);\n\n    if (this.state.loginStatus) {\n      console.log(this.state.loginStatus);\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 18\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit.bind(this),\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, \"Sign In\"), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.username,\n      onChange: this.handleChange.bind(this),\n      name: \"username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      value: this.state.password,\n      onChange: this.handleChange.bind(this),\n      name: \"password\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/src/components/LogIn/index.js"],"names":["React","Component","useHistory","ReactDOM","Redirect","Route","Login","constructor","props","wasSucess","Promise","resolve","reject","fetch","method","then","response","json","data","console","log","setState","loginStatus","isLoggedIn","setTimeout","loggedinstate","state","username","password","componentDidMount","saveLogin","headers","body","JSON","stringify","handleChange","event","name","target","value","handleSubmit","preventDefault","status","render","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport ReactDOM from 'react-dom';\nimport './Login.css';\nimport { Redirect, Route } from \"react-router\";\n\n\nclass Login extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = { username: '', password: '', loggedinstate: '', loginStatus: false }\n      }  \n      \n      componentDidMount(){\n        //this.isLoggedIn();\n        \n      }\n\n    saveLogin(username, password) {\n      return new Promise((resolve, reject) => {\n        fetch('/login/',{\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\"username\": username, \"password\": password}),\n        });\n        resolve();\n      })\n        \n    }\n\n    wasSucess = () => {\n      return new Promise((resolve, reject) => {\n        fetch('/login/',{ method: 'GET'})\n        .then((response) => response.json())\n        .then((data) => {\n          console.log(data)\n          this.setState({loginStatus: data['status']})\n          resolve(data);\n        });\n      })\n  }\n    \n\n  isLoggedIn = () => {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        fetch('/login-status/')\n        .then((response) => response.json())\n        .then((data) => {\n          this.setState({loggedinstate: data['logged in']});\n          console.log(data['logged in']);\n          resolve(data['logged in']);\n        });\n      }, 1500)\n    })\n\t\t\n}\n\n    handleChange(event) {\n      let name = event.target.name;\n      if (name == 'username'){\n        this.setState({ username: event.target.value})\n      }\n      if (name == 'password'){\n        this.setState({ password: event.target.value})\n      }\n  \n    }\n    \n    async handleSubmit(event) {\n      console.log(\"submitting\")\n        event.preventDefault()\n        await this.saveLogin(this.state.username, this.state.password)\n        /*await this.wasSucess().then(status => {\n          console.log(status);\n          if (status) {\n            this.render();\n          }\n          else {\n            console.log(\"no\")\n          }\n        });*/\n        await this.isLoggedIn().then(status => {\n          console.log(status);\n          this.setState({loggedinstate: status});\n        })\n      }\n\n\n\n    \n      render() {\n        console.log(this.state.loginStatus)\n        if (this.state.loginStatus) {\n          console.log(this.state.loginStatus)\n          return <Redirect to=\"/\" />\n        }\n        return (\n          <form onSubmit={this.handleSubmit.bind(this)} className='form-group'>\n            <h1>Sign In</h1>\n            <label>Username</label>\n            <input\n              type=\"text\"\n              value={this.state.username}\n              onChange={this.handleChange.bind(this)}\n              name='username'\n            /><br></br>\n            <span>Password</span>\n            <input\n              type=\"password\"\n              value={this.state.password}\n              onChange={this.handleChange.bind(this)}\n              name='password'\n              required\n            />\n            \n            <input type=\"submit\" value=\"Submit\" />\n          </form>\n        )\n      }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}