{"ast":null,"code":"import _classCallCheck from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Chart from'chart.js';var MarketChart=/*#__PURE__*/function(_React$Component){_inherits(MarketChart,_React$Component);var _super=_createSuper(MarketChart);function MarketChart(props){var _this;_classCallCheck(this,MarketChart);_this=_super.call(this,props);_this.chartRef=React.createRef();_this.state={data:null,orgs:null};return _this;}_createClass(MarketChart,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('/total').then(function(res){return res.json();}).then(function(data){_this2.setState({data:Object.values(data),orgs:Object.keys(data)});_this2.renderChart();});}},{key:\"renderChart\",value:function renderChart(){var colors={'Columbia':'rgb(172, 204, 230)','Georgia Tech':'rgb(179, 163, 105)','UCLA':'rgb(39, 116, 174)','IHME':'rgb(87, 175, 85)','Youyang Gu':'rgb(196, 129, 14)'};var colorArr=[];for(var i=0;i<this.state.orgs.length;i++){colorArr.push(colors[this.state.orgs[i]]);}var data={datasets:[{data:this.state.data,backgroundColor:colorArr}],labels:this.state.orgs};this.myChart=new Chart(this.chartRef.current,{type:'doughnut',data:data,options:{responsive:true}});}},{key:\"render\",value:function render(){var _this$state=this.state,data=_this$state.data,orgs=_this$state.orgs;if(!data||!orgs)return'Loading...';return/*#__PURE__*/React.createElement(\"div\",{className:\"chart-container\",style:{position:\"relative\",width:\"80vw\",margin:\"0 10%\"}},/*#__PURE__*/React.createElement(\"canvas\",{ref:this.chartRef}));}}]);return MarketChart;}(React.Component);export default MarketChart;","map":{"version":3,"sources":["/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/src/components/MarketChart/index.js"],"names":["React","Chart","MarketChart","props","chartRef","createRef","state","data","orgs","fetch","then","res","json","setState","Object","values","keys","renderChart","colors","colorArr","i","length","push","datasets","backgroundColor","labels","myChart","current","type","options","responsive","position","width","margin","Component"],"mappings":"gnBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,C,GAGMC,CAAAA,W,sHACF,qBAAYC,KAAZ,CAAmB,6CACf,uBAAMA,KAAN,EACA,MAAKC,QAAL,CAAgBJ,KAAK,CAACK,SAAN,EAAhB,CACA,MAAKC,KAAL,CAAa,CACTC,IAAI,CAAE,IADG,CAETC,IAAI,CAAE,IAFG,CAAb,CAHe,aAOlB,C,qFAEmB,iBAChBC,KAAK,CAAC,QAAD,CAAL,CAAgBC,IAAhB,CAAqB,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EAAxB,EAAwCF,IAAxC,CAA6C,SAAAH,IAAI,CAAI,CACjD,MAAI,CAACM,QAAL,CAAc,CAACN,IAAI,CAAEO,MAAM,CAACC,MAAP,CAAcR,IAAd,CAAP,CAA4BC,IAAI,CAAEM,MAAM,CAACE,IAAP,CAAYT,IAAZ,CAAlC,CAAd,EACA,MAAI,CAACU,WAAL,GACH,CAHD,EAIH,C,iDAEa,CACV,GAAIC,CAAAA,MAAM,CAAG,CACT,WAAY,oBADH,CAET,eAAgB,oBAFP,CAGT,OAAQ,mBAHC,CAIT,OAAQ,kBAJC,CAKT,aAAc,mBALL,CAAb,CAOA,GAAIC,CAAAA,QAAQ,CAAG,EAAf,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKd,KAAL,CAAWE,IAAX,CAAgBa,MAApC,CAA4CD,CAAC,EAA7C,CAAiD,CAC7CD,QAAQ,CAACG,IAAT,CAAcJ,MAAM,CAAC,KAAKZ,KAAL,CAAWE,IAAX,CAAgBY,CAAhB,CAAD,CAApB,EACH,CACD,GAAIb,CAAAA,IAAI,CAAG,CACPgB,QAAQ,CAAE,CAAC,CACPhB,IAAI,CAAE,KAAKD,KAAL,CAAWC,IADV,CAEPiB,eAAe,CAAEL,QAFV,CAAD,CADH,CAKPM,MAAM,CAAE,KAAKnB,KAAL,CAAWE,IALZ,CAAX,CAQA,KAAKkB,OAAL,CAAe,GAAIzB,CAAAA,KAAJ,CAAU,KAAKG,QAAL,CAAcuB,OAAxB,CAAiC,CAC5CC,IAAI,CAAE,UADsC,CAE5CrB,IAAI,CAAEA,IAFsC,CAG5CsB,OAAO,CAAE,CACLC,UAAU,CAAE,IADP,CAHmC,CAAjC,CAAf,CAOH,C,uCAEQ,iBACkB,KAAKxB,KADvB,CACGC,IADH,aACGA,IADH,CACSC,IADT,aACSA,IADT,CAEL,GAAI,CAACD,IAAD,EAAS,CAACC,IAAd,CAAoB,MAAO,YAAP,CAEpB,mBACI,2BAAK,SAAS,CAAC,iBAAf,CAAiC,KAAK,CAAE,CAACuB,QAAQ,CAAE,UAAX,CAAuBC,KAAK,CAAE,MAA9B,CAAsCC,MAAM,CAAE,OAA9C,CAAxC,eACI,8BAAQ,GAAG,CAAE,KAAK7B,QAAlB,EADJ,CADJ,CAKH,C,yBAvDqBJ,KAAK,CAACkC,S,EA0DhC,cAAehC,CAAAA,WAAf","sourcesContent":["import React from 'react';\nimport Chart from 'chart.js';\n\n\nclass MarketChart extends React.Component {\n    constructor(props) {\n        super(props);\n        this.chartRef = React.createRef();\n        this.state = {\n            data: null,\n            orgs: null,\n        };\n    }\n\n    componentDidMount() {\n        fetch('/total').then(res => res.json()).then(data => {\n            this.setState({data: Object.values(data), orgs: Object.keys(data)});\n            this.renderChart();\n        });\n    }\n\n    renderChart() {\n        var colors = {\n            'Columbia': 'rgb(172, 204, 230)',\n            'Georgia Tech': 'rgb(179, 163, 105)',\n            'UCLA': 'rgb(39, 116, 174)',\n            'IHME': 'rgb(87, 175, 85)',\n            'Youyang Gu': 'rgb(196, 129, 14)'\n        };\n        var colorArr = [];\n        for (var i = 0; i < this.state.orgs.length; i++) {\n            colorArr.push(colors[this.state.orgs[i]]);\n        }\n        var data = {\n            datasets: [{\n                data: this.state.data,\n                backgroundColor: colorArr,\n            }],\n            labels: this.state.orgs\n        };\n\n        this.myChart = new Chart(this.chartRef.current, {\n            type: 'doughnut',\n            data: data,\n            options: {\n                responsive: true\n            }\n        })\n    }\n\n    render() {\n        const { data, orgs } = this.state;\n        if (!data || !orgs) return 'Loading...';\n\n        return (\n            <div className=\"chart-container\" style={{position: \"relative\", width: \"80vw\", margin: \"0 10%\"}}>\n                <canvas ref={this.chartRef} />\n            </div>\n        );\n    }\n}\n\nexport default MarketChart;\n"]},"metadata":{},"sourceType":"module"}