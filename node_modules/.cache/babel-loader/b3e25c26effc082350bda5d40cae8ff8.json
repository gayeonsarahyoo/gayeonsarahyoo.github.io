{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{useHistory}from\"react-router-dom\";import ReactDOM from'react-dom';import'./Login.css';import{Redirect}from\"react-router\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.wasSucess=function(){return new Promise(function(resolve,reject){fetch('/login/',{method:'GET'}).then(function(response){return response.json();}).then(function(data){console.log(data);_this.setState({loginStatus:data['status']});resolve(data);});});};_this.updateLoginState=function(){return new Promise(function(resolve,reject){setTimeout(function(){fetch('/login-status/').then(function(response){return response.json();}).then(function(data){_this.setState({loginStatus:data['logged in']});console.log(data['logged in']);resolve(data['logged in']);});},200);});};_this.state={username:'',password:'',loggedinstate:'',loginStatus:false};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){//this.isLoggedIn();\n}},{key:\"saveLogin\",value:function saveLogin(username,password){return new Promise(function(resolve,reject){fetch('/login/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"username\":username,\"password\":password})});resolve();});}},{key:\"handleChange\",value:function handleChange(event){var name=event.target.name;if(name=='username'){this.setState({username:event.target.value});}if(name=='password'){this.setState({password:event.target.value});}}},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"submitting\");event.preventDefault();_context.next=4;return this.saveLogin(this.state.username,this.state.password);case 4:_context.next=6;return this.updateLoginState();case 6:case\"end\":return _context.stop();}}},_callee,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"render\",value:function render(){if(this.state.loginStatus){//return <Redirect to=\"/\" />\nwindow.location.href='/';}return/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit.bind(this),className:\"form-group\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Sign In\"),/*#__PURE__*/React.createElement(\"label\",null,\"Username\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",value:this.state.username,onChange:this.handleChange.bind(this),name:\"username\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",null,\"Password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",value:this.state.password,onChange:this.handleChange.bind(this),name:\"password\",required:true}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Submit\"}));}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/Users/sarah/Documents/Sarah/Projects/reu/covid19-forecasting-market/frontend/src/components/LogIn/index.js"],"names":["React","Component","useHistory","ReactDOM","Redirect","Login","props","wasSucess","Promise","resolve","reject","fetch","method","then","response","json","data","console","log","setState","loginStatus","updateLoginState","setTimeout","state","username","password","loggedinstate","headers","body","JSON","stringify","event","name","target","value","preventDefault","saveLogin","window","location","href","handleSubmit","bind","handleChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport ReactDOM from 'react-dom';\nimport './Login.css';\nimport { Redirect } from \"react-router\";\n\n\nclass Login extends React.Component{\n    constructor(props) {\n        super(props)\n        this.state = { username: '', password: '', loggedinstate: '', loginStatus: false }\n      }  \n      \n      componentDidMount(){\n        //this.isLoggedIn();\n        \n      }\n\n    saveLogin(username, password) {\n      return new Promise((resolve, reject) => {\n        fetch('/login/',{\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\"username\": username, \"password\": password}),\n        });\n        resolve();\n      })\n        \n    }\n\n    wasSucess = () => {\n      return new Promise((resolve, reject) => {\n        fetch('/login/',{ method: 'GET'})\n        .then((response) => response.json())\n        .then((data) => {\n          console.log(data)\n          this.setState({loginStatus: data['status']})\n          resolve(data);\n        });\n      })\n  }\n    \n\n  updateLoginState = () => {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        fetch('/login-status/')\n        .then((response) => response.json())\n        .then((data) => {\n          this.setState({loginStatus: data['logged in']});\n          console.log(data['logged in']);\n          resolve(data['logged in']);\n        });\n      }, 200)\n    })\n\t\t\n}\n\n    handleChange(event) {\n      let name = event.target.name;\n      if (name == 'username'){\n        this.setState({ username: event.target.value})\n      }\n      if (name == 'password'){\n        this.setState({ password: event.target.value})\n      }\n  \n    }\n    \n    async handleSubmit(event) {\n      console.log(\"submitting\")\n        event.preventDefault()\n        await this.saveLogin(this.state.username, this.state.password)\n        /*await this.wasSucess().then(status => {\n          console.log(status);\n        });*/\n        await this.updateLoginState();\n      }\n\n\n\n    \n      render() {\n        if (this.state.loginStatus) {\n          //return <Redirect to=\"/\" />\n          window.location.href ='/'\n        }\n        return (\n          <form onSubmit={this.handleSubmit.bind(this)} className='form-group'>\n            <h1>Sign In</h1>\n            <label>Username</label>\n            <input\n              type=\"text\"\n              value={this.state.username}\n              onChange={this.handleChange.bind(this)}\n              name='username'\n            /><br></br>\n            <span>Password</span>\n            <input\n              type=\"password\"\n              value={this.state.password}\n              onChange={this.handleChange.bind(this)}\n              name='password'\n              required\n            />\n            \n            <input type=\"submit\" value=\"Submit\" />\n          </form>\n        )\n      }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}